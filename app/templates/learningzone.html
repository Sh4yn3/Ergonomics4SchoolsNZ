{% extends "layout.html" %}
{% block content %}
<style>
/* === LEARNING ZONE === */

#learningzone-1 {
    margin-top: 90px;
    text-align: center;
    padding: 20px 0px;
}

#learningzone-2 {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    justify-content: flex-start;
}

.lz-intro {
    display: flex;
}

.lz-welcome {
    flex: 1;
    gap: 10px;
}

.lz-ergo img {
    padding-top: 20px;
    max-width: 200px;
    height: auto;
}

#lz-header h1 {
    padding: 20px 0px;
}

.lz-box {
    flex: 0 0 calc(33.333% - 10.66px);
    box-sizing: border-box;
    padding: 0;
    display: flex;
    flex-direction: column;
    border-radius: 4px;
    overflow: hidden;
}

.lz-header {
    display: flex;
    align-items: center;
}

.lz-toggle {
    background-color: #d4dde3;
    color: #3d7da7;
    font-weight: bold;
    cursor: pointer;
    padding: 12px 16px;
    border: none;
    font-size: 15px;
    flex-shrink: 0;
    border-radius: 0px 20px 0px 0px;
    border: solid 2px #000;
    border-right: solid 2px #2a3f59;
}

.lz-toggle:hover {
    color: #4d5961;
}

.lz-name {
    background-color: #4983aa;
    color: #F7F7F7;
    text-decoration: none;
    font-size: 15px;
    padding: 12px 12px;
    flex-grow: 1;
    border-radius: 0px 20px 0px 0px;
    border: 2px solid #000000;
}

a.lz-name:hover {
    text-decoration: underline;
}

.lz-summary {
    max-height: 0;
    overflow: hidden;
    background-color: #36597d;
    padding: 0 10px;
    border: 2px solid #000;
    transition: max-height 0.3s ease, padding 0.3s ease;
}

.lz-summary.active {
    max-height: 500px; 
    padding: 10px;
}

</style>
<section id="learningzone-1">
    <div class="textbox">
      <div class="lz-intro">
        <div class="lz-welcome">
          <h1> Welcome to the Learning Zone! </h1>
          <p> Topics in the Learning Zone contains descriptions, design guidelines, and tips on what to do.
              Select a topic and explore, if you don't know what you're looking for, click the magnefying glass
              for a drop down of keywords and the summary  </p>
        </div>
        <div class="lz-ergo">
          <img src="/static/icon/Mascot2.png">
          <p> What is Ergonomics? </p>
        </div>
      </div>
      <div class="lz-toggle-all">
        <button id="expand-all">Expand All</button>
        <button id="collapse-all">Collapse All</button>
      </div>
    </div>
</section>

<section id="lz-header" class="textbox"> 
  <h1> List of Topics </h1>
</section>

<section id="learningzone-2" class="textbox">
  {% for topic in topics %}
  <div class="lz-box">
    <div class="lz-header">
      <button type="button" class="lz-toggle"> &gt; </button>
      <a href="/learning-zone/topic/{{ topic.id }}" class="lz-name"> {{ topic.name }} </a>
    </div>
    <div class="lz-summary">
      <p>{{ topic.summary or "..." }}</p>
      <p>Keywords: {{ topic.keywords }} </p>
    </div>
  </div>
  {% endfor %}
</section>

<section id="lz-header" class="textbox">
  <h1> Research Reports </h1>
</section>

<section id="learningzone-3" class="textbox">
  {% for research in research %}
  <div class="lz-box">
    <div class="lz-header">
      <button type="button" class="lz-toggle"> &gt; </button>
      <a href="/learning-zone/research/{{ research.id }}" class="lz-name"> {{ research.name }} </a>
    </div>
    <div class="lz-summary">
      <p> {{ research.introduction }} </p>
      <p> Author(s): {{ research.authors }} </p>
    </div>
  </div>
  {% endfor %}
</section>


<!-- Collapse & Uncollapse Summary -->
<script>
  var toggles = document.getElementsByClassName("lz-toggle");

  for (var i = 0; i < toggles.length; i++) {
    toggles[i].addEventListener("click", function () {
      var summary = this.parentElement.nextElementSibling;
      if (summary.classList.contains("active")) {
        summary.classList.remove("active");
        this.textContent = " > ";
      } else {
        summary.classList.add("active");
        this.textContent = " v ";
      }
    });
  }
</script>


<!-- Collapse All -->
<script>
  const expandAllBtn = document.getElementById("expand-all");
  const collapseAllBtn = document.getElementById("collapse-all");

  const allSummaries = document.getElementsByClassName("lz-summary");
  const allToggles = document.getElementsByClassName("lz-toggle");

  expandAllBtn.addEventListener("click", function () {
    for (let i = 0; i < allSummaries.length; i++) {
      allSummaries[i].classList.add("active");
      allToggles[i].textContent = " v ";
    }
  });

  collapseAllBtn.addEventListener("click", function () {
    for (let i = 0; i < allSummaries.length; i++) {
      allSummaries[i].classList.remove("active");
      allToggles[i].textContent = " > ";
    }
  });
</script>

{% endblock %}